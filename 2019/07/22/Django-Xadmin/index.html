<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Django-Xadmin | Sxadmin blog</title><meta name="description" content="Django国人开发的第三方后台管理系统，强大而美观。"><meta name="keywords" content="Djang-Xadmin"><meta name="author" content="Sxadmin"><meta name="copyright" content="Sxadmin"><meta name="format-detection" content="telephone=no"><link rel="shortcut icon" href="https://s1.ax1x.com/2020/06/15/NpA1v6.th.png"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="dns-prefetch" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="https://fonts.googleapis.com" crossorigin="crossorigin"/><link rel="dns-prefetch" href="https://fonts.googleapis.com"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="dns-prefetch" href="//busuanzi.ibruce.info"/><meta name="twitter:card" content="summary"><meta name="twitter:title" content="Django-Xadmin"><meta name="twitter:description" content="Django国人开发的第三方后台管理系统，强大而美观。"><meta name="twitter:image" content="https://sxadmin.github.io/img/cover/cover42.png"><meta property="og:type" content="article"><meta property="og:title" content="Django-Xadmin"><meta property="og:url" content="https://sxadmin.github.io/2019/07/22/Django-Xadmin/"><meta property="og:site_name" content="Sxadmin blog"><meta property="og:description" content="Django国人开发的第三方后台管理系统，强大而美观。"><meta property="og:image" content="https://sxadmin.github.io/img/cover/cover42.png"><meta property="article:published_time" content="2019-07-22T06:13:34.000Z"><meta property="article:modified_time" content="2020-06-14T17:58:20.000Z"><script src="https://cdn.jsdelivr.net/npm/js-cookie/dist/js.cookie.min.js"></script><script>var autoChangeMode = '1'
var t = Cookies.get("theme")
if (autoChangeMode == '1'){
  var isDarkMode = window.matchMedia("(prefers-color-scheme: dark)").matches
  var isLightMode = window.matchMedia("(prefers-color-scheme: light)").matches
  var isNotSpecified = window.matchMedia("(prefers-color-scheme: no-preference)").matches
  var hasNoSupport = !isDarkMode && !isLightMode && !isNotSpecified

  if (t === undefined){
    if (isLightMode) activateLightMode()
    else if (isDarkMode) activateDarkMode()
    else if (isNotSpecified || hasNoSupport){
      console.log('You specified no preference for a color scheme or your browser does not support it. I Schedule dark mode during night time.')
      var now = new Date()
      var hour = now.getHours()
      var isNight = hour < 6 || hour >= 18
      isNight ? activateDarkMode() : activateLightMode()
  }
  } else if (t == 'light') activateLightMode()
  else activateDarkMode()

} else if (autoChangeMode == '2'){
  now = new Date();
  hour = now.getHours();
  isNight = hour < 6 || hour >= 18
  if(t === undefined) isNight? activateDarkMode() : activateLightMode()
  else if (t === 'light') activateLightMode()
  else activateDarkMode() 
} else {
  if ( t == 'dark' ) activateDarkMode()
  else if ( t == 'light') activateLightMode()
}

function activateDarkMode(){
  document.documentElement.setAttribute('data-theme', 'dark')
  if (document.querySelector('meta[name="theme-color"]') !== null){
    document.querySelector('meta[name="theme-color"]').setAttribute('content','#000')
  }
}
function activateLightMode(){
  document.documentElement.setAttribute('data-theme', 'light')
  if (document.querySelector('meta[name="theme-color"]') !== null){
  document.querySelector('meta[name="theme-color"]').setAttribute('content','#fff')
  }
}</script><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/font-awesome@latest/css/font-awesome.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.css"><link rel="canonical" href="https://sxadmin.github.io/2019/07/22/Django-Xadmin/"><link rel="prev" title="Django-使用celery" href="https://sxadmin.github.io/2019/07/25/Django-%E4%BD%BF%E7%94%A8celery/"><link rel="next" title="Django-登陆验证" href="https://sxadmin.github.io/2019/07/19/Django-%E7%99%BB%E9%99%86%E9%AA%8C%E8%AF%81/"><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Titillium+Web"><script>var GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  translate: {"defaultEncoding":2,"translateDelay":0,"cookieDomain":"https://xxx/","msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"簡"},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  bookmark: {
    message_prev: '按',
    message_next: '键将本页加入书签'
  },
  runtime_unit: '天',
  runtime: true,
  copyright: undefined,
  ClickShowText: undefined,
  medium_zoom: false,
  fancybox: true,
  Snackbar: undefined,
  baiduPush: false,
  highlightCopy: true,
  highlightLang: true,
  highlightShrink: 'false',
  isFontAwesomeV5: false,
  isPhotoFigcaption: false,
  islazyload: false,
  isanchor: false
  
}</script><script>var GLOBAL_CONFIG_SITE = { 
  isPost: true,
  isHome: false,
  isSidebar: true  
  }</script><noscript><style>
#page-header {
  opacity: 1
}
.justified-gallery img{
  opacity: 1
}
</style></noscript><meta name="generator" content="Hexo 4.2.1"></head><body><div id="mobile-sidebar"><div id="menu_mask"></div><div id="mobile-sidebar-menus"><div class="mobile_author_icon"><img class="avatar-img" src="/img/avatar.png" onerror="onerror=null;src='https://s1.ax1x.com/2020/06/15/NpPYfx.jpg'" alt="avatar"/></div><div class="mobile_post_data"><div class="mobile_data_item is-center"><div class="mobile_data_link"><a href="/archives/"><div class="headline">文章</div><div class="length_num">95</div></a></div></div><div class="mobile_data_item is-center">      <div class="mobile_data_link"><a href="/tags/"><div class="headline">标签</div><div class="length_num">66</div></a></div></div><div class="mobile_data_item is-center">     <div class="mobile_data_link"><a href="/categories/"><div class="headline">分类</div><div class="length_num">13</div></a></div></div></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fa fa-home"></i><span> 首頁</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fa fa-archive"></i><span> 時間軸</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fa fa-tags"></i><span> 標籤</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fa fa-folder-open"></i><span> 分類</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fa fa-link"></i><span> 友鏈</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fa fa-heart"></i><span> 關於</span></a></div></div></div></div><i class="fa fa-arrow-right on" id="toggle-sidebar" aria-hidden="true">     </i><div id="sidebar"><div class="sidebar-toc"><div class="sidebar-toc__title">目录</div><div class="sidebar-toc__progress"><span class="progress-notice">你已经读了</span><span class="progress-num">0</span><span class="progress-percentage">%</span><div class="sidebar-toc__progress-bar">     </div></div><div class="sidebar-toc__content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#安装"><span class="toc-number">1.</span> <span class="toc-text">安装</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#配置"><span class="toc-number">2.</span> <span class="toc-text">配置</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#使用"><span class="toc-number">3.</span> <span class="toc-text">使用</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#定制顶部标题"><span class="toc-number">3.1.</span> <span class="toc-text">定制顶部标题</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#数据关联到后台"><span class="toc-number">3.2.</span> <span class="toc-text">数据关联到后台</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#修改项目显示"><span class="toc-number">3.3.</span> <span class="toc-text">修改项目显示</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#设置图标"><span class="toc-number">3.4.</span> <span class="toc-text">设置图标</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#设置搜索"><span class="toc-number">3.5.</span> <span class="toc-text">设置搜索</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#设置书签"><span class="toc-number">3.6.</span> <span class="toc-text">设置书签</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#指定参数"><span class="toc-number">3.7.</span> <span class="toc-text">指定参数</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#错误处理"><span class="toc-number">4.</span> <span class="toc-text">错误处理</span></a></li></ol></div></div></div><div id="body-wrap"><div class="post-bg" id="nav" style="background-image: url(/img/cover/cover42.png)"><div id="page-header"><span class="pull_left" id="blog_name"><a class="blog_title" id="site-name" href="/">Sxadmin blog</a></span><span class="pull_right menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fa fa-home"></i><span> 首頁</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fa fa-archive"></i><span> 時間軸</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fa fa-tags"></i><span> 標籤</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fa fa-folder-open"></i><span> 分類</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fa fa-link"></i><span> 友鏈</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fa fa-heart"></i><span> 關於</span></a></div></div><span class="toggle-menu close"><a class="site-page"><i class="fa fa-bars fa-fw" aria-hidden="true"></i></a></span></span></div><div id="post-info"><div id="post-title"><div class="posttitle">Django-Xadmin</div></div><div id="post-meta"><div class="meta-firstline"><time class="post-meta__date"><span class="post-meta__date-created" title="发表于 2019-07-22 14:13:34"><i class="fa fa-calendar" aria-hidden="true"></i> 发表于 2019-07-22</span><span class="post-meta__separator">|</span><span class="post-meta__date-updated" title="更新于 2020-06-15 01:58:20"><i class="fa fa-history" aria-hidden="true"></i> 更新于 2020-06-15</span></time><span class="post-meta__categories"><span class="post-meta__separator">|</span><i class="fa fa-inbox post-meta__icon" aria-hidden="true"></i><a class="post-meta__categories" href="/categories/WEB-%E5%90%8E%E7%AB%AF%E6%A1%86%E6%9E%B6/">WEB 后端框架</a></span></div><div class="meta-secondline"> </div><div class="meta-thirdline"><span class="post-meta-pv-cv"><i class="fa fa-eye post-meta__icon" aria-hidden="true"> </i><span>阅读量:</span><span id="busuanzi_value_page_pv"></span></span><span class="post-meta-commentcount"></span></div></div></div></div><main class="layout_post" id="content-inner"><article id="post"><div class="post-content" id="article-container"><blockquote class="blockquote-center">“我们只能延缓那一日，但不能改变那结局。因为命运，本就是因为它无法被改变，所以才称之为命运。”他顿了顿，“而现在，你要改变命运了幺？”</blockquote>

<script type="text/javascript" src="/js/src/bai.js"></script>


<h1 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h1><p>常规的安装使用pip</p>
<pre><code>pip3 install django-xadmin</code></pre><p>然而发现报错</p>
<pre><code>UnicodeDecodeError: &apos;gbk&apos; codec can&apos;t decode byte 0xa4 in position 3256: illegal multibyte sequence</code></pre><p>原因是编码错误，换个方式</p>
<pre><code>pip3 install git+git://github.com/sshwsfc/xadmin.git@django2</code></pre><p>我的电脑发现还是不行，只好直接把GIthub的源码下载下来</p>
<pre><code>https://github.com/sshwsfc/xadmin/tree/django2</code></pre><p>然后编辑里面的requirement.txt</p>
<pre><code>django-crispy-forms==1.6.0
django-import-export==0.5.1
django-reversion==2.0.0
django-formtools==2.1
future==0.15.2
httplib2==0.9.2
six==1.10.0</code></pre><p>先执行命令</p>
<pre><code>pip3 install -r requirement.txt</code></pre><p><strong>注意 django-formtools 这个库的版本号需要为2.1 ，不然会报错</strong></p>
<p>然后执行命令</p>
<pre><code>python3 setup.py install</code></pre><p>为了让xadmin拥有导出excel的功能，还需要安装两个库</p>
<pre><code>pip3 install xlwt
pip3 install xlsxwriter</code></pre><p>安装成功.</p>
<p>为了方便，我把xadmin2.0安装包压缩后保存在服务器，方便备份下载<a href="https://sxadmin.github.io/upload/xadmin-django2.rar">Download_Ulr</a></p>
<h1 id="配置"><a href="#配置" class="headerlink" title="配置"></a>配置</h1><p>随便创建一个项目，修改其中的settings.py和urls.py即可完成配置</p>
<pre><code># settings.py
INSTALLED_APPS = [
    &apos;django.contrib.admin&apos;,
    &apos;django.contrib.auth&apos;,
    &apos;django.contrib.contenttypes&apos;,
    &apos;django.contrib.sessions&apos;,
    &apos;django.contrib.messages&apos;,
    &apos;django.contrib.staticfiles&apos;,
    &apos;xadmin&apos;,
    &apos;crispy_forms&apos;,
    &apos;reversion&apos;,
]

LANGUAGE_CODE = &apos;zh-hans&apos;

TIME_ZONE = &apos;Asia/Shanghai&apos;

# urls.py
from django.contrib import admin
from django.urls import path
import xadmin

urlpatterns = [
    path(&apos;admin/&apos;, admin.site.urls),
    path(&apos;xadmin/&apos;, xadmin.site.urls)
]</code></pre><p>然后执行命令创建数据库创建管理员用户即可</p>
<p><img src="/upload/TIM%E6%88%AA%E5%9B%BE20190722152431.png" alt=""></p>
<p>使用命令为下面三行</p>
<pre><code>python3 manage.py migrate
python3 manage.py createsuperuser
python3 manage.py runserver</code></pre><p>然后访问</p>
<pre><code>http://127.0.0.1:8000/xadmin</code></pre><p>即可</p>
<p><img src="/upload/TIM%E6%88%AA%E5%9B%BE20190722152545.png" alt=""></p>
<p>很漂亮哦</p>
<h1 id="使用"><a href="#使用" class="headerlink" title="使用"></a>使用</h1><p>首先新建一个应用</p>
<pre><code>python3 manage.py startapp app</code></pre><p>然后别忘了在settings.py中INSTALLER_APPS添加你的引用</p>
<h2 id="定制顶部标题"><a href="#定制顶部标题" class="headerlink" title="定制顶部标题"></a>定制顶部标题</h2><pre><code># app/admin.py
from xadmin import views

class GlobalSetting(object):
    # 设置后台顶部标题
    site_title =&apos;修改顶部标签成功~~&apos;
    # 设置后台底部标题
    site_footer =&apos;记得双击么么哒&apos;
    # menu_style = &quot;accordion&quot;
    # # 设置左侧菜单可折叠
xadmin.site.register(views.CommAdminView, GlobalSetting)

class BaseSetting(object):
     &quot;&quot;&quot;主题配置&quot;&quot;&quot;
     enable_themes = True
     use_bootswatch = True
xadmin.site.register(views.BaseAdminView, BaseSetting)</code></pre><p>查看后台，可以看到标题被修改</p>
<p><img src="/upload/TIM%E6%88%AA%E5%9B%BE20190722160913.png" alt=""></p>
<h2 id="数据关联到后台"><a href="#数据关联到后台" class="headerlink" title="数据关联到后台"></a>数据关联到后台</h2><pre><code># app/models.py
# coding:utf-8
from django.db import models

class UserInfo(models.Model):
    username = models.CharField(max_length=20,verbose_name=&apos;用户名&apos;)
    password = models.CharField(max_length=30,verbose_name=&apos;密码&apos;)
    datetime = models.DateField(auto_now_add=True,verbose_name=&apos;注册时间&apos;)

    class Meta:
        db_table = &apos;UserInfo&apos;
        verbose_name = &quot;用户信息&quot;
        verbose_name_plural = verbose_name

class Data(models.Model):
    id = models.AutoField(primary_key=True)
    data = models.TextField()
    class Meta:
        db_table = &apos;Show_Data&apos;
        verbose_name = &apos;数据展示&apos;
        verbose_name_plural = verbose_name</code></pre><p>然后继续修改文件</p>
<pre><code># app/admin.py
# coding:utf-8

from xadmin import views
import xadmin
from .models import UserInfo,Data

class Show_UserInfo(object):
    &quot;&quot;&quot;设置显示字段&quot;&quot;&quot;
    #  list_display 设置显示的字段
    # list_filter 　设置过滤的字段　外键　使用 &apos;__&apos; 　比如　user__id　一般用于多数据过滤
    # search_fields　设置搜索的字段，搜索框使用的模糊查询，一般用于唯一值查找
    # free_query_fields　默认是Ture　指定是否能自由搜索　也就是使用url来搜索
    # data_charts　图表功能

    list_display = [&apos;username&apos;,&apos;password&apos;,&apos;datetime&apos;]
    data_charts = {
        &quot;user_count&quot;: {&apos;title&apos;: u&quot;用户报表&quot;, &quot;x-field&quot;: &quot;datetime&quot;, &quot;y-field&quot;: (&quot;username&quot;,),
                       &quot;order&quot;: (&apos;datetime&apos;,)},
        &quot;avg_count&quot;: {&apos;title&apos;: u&quot;密码报表&quot;, &quot;x-field&quot;: &quot;datetime&quot;, &quot;y-field&quot;: (&apos;password&apos;,),
                      &quot;order&quot;: (&apos;datetime&apos;,)}
    }

    # title : 图表的显示名称
    # x-field : 图表的 X 轴数据列, 一般是日期, 时间等
    # y-field : 图表的 Y 轴数据列, 该项是一个list, 可以同时设定多个列, 这样多个列的数据会在同一个图表中显示
    # order : 排序信息, 如果不写则使用数据列表的排序
xadmin.site.register(UserInfo,Show_UserInfo)


class Show_Data(object):
    list_display = [&apos;id&apos;,&apos;data&apos;]
xadmin.site.register(Data,Show_Data)</code></pre><p>查看后台，可以看到数据被关联</p>
<p><img src="/upload/TIM%E6%88%AA%E5%9B%BE20190722161246.png" alt=""></p>
<p>还可以看到有导出哦~</p>
<h2 id="修改项目显示"><a href="#修改项目显示" class="headerlink" title="修改项目显示"></a>修改项目显示</h2><p>创建的项目名为app，显示的也是app，修改方式如下</p>
<pre><code># app/app.py
# coding:utf-8
from django.apps import AppConfig


class AppConfig(AppConfig):
    name = &apos;app&apos;
    verbose_name = &quot;用户管理&quot;</code></pre><p>然后修改同目录下init文件</p>
<pre><code># app/__init__.py
default_app_config =&apos;app.apps.AppConfig&apos;</code></pre><p>然后可以看到显示为中文</p>
<p><img src="/upload/TIM%E6%88%AA%E5%9B%BE20190722164141.png" alt=""></p>
<h2 id="设置图标"><a href="#设置图标" class="headerlink" title="设置图标"></a>设置图标</h2><p>使用如下方式对可以添加图标</p>
<pre><code># app/admin.py
class Show_Data(object):
    list_display = [&apos;id&apos;,&apos;data&apos;]
    model_icon = &apos;fa fa-home&apos;
    # 添加这一行，可以显示图标，
    # 查看更多图标访问 http://fontawesome.dashgame.com/
    # https://v3.bootcss.com/components/
    # http://www.yeahzan.com/fa/facss.html
xadmin.site.register(Data,Show_Data)</code></pre><p><img src="/upload/TIM%E6%88%AA%E5%9B%BE20190722165304.png" alt=""></p>
<p>注意这里添加图标，对应的对象必须是数据库的模型</p>
<p>xadmin使用的导航图标采用font-awesome图标，你可以到</p>
<p><a href="http://fontawesome.dashgame.com" target="_blank" rel="noopener">http://fontawesome.dashgame.com</a></p>
<p>下载最新的图标文件，并解压出css和font目录</p>
<p>把css和font目录这两个文件拷贝并覆盖到xadmin的目录中，具体xadmin的目录路径如下：</p>
<pre><code>C:\python3\Lib\site-packages\xadmin-2.0.1-py3.6.egg\xadmin\static\xadmin</code></pre><h2 id="设置搜索"><a href="#设置搜索" class="headerlink" title="设置搜索"></a>设置搜索</h2><pre><code>class postsAdmin(object):
    list_display = [&quot;navi_f&quot;, &quot;navi_s&quot;, &quot;author&quot;, &quot;title&quot;,  &quot;add_time&quot;, &quot;is_recommend&quot;, &quot;is_essence&quot;, &quot;is_auth&quot;, &quot;is_approval&quot;, &quot;is_commit&quot;]　　# 指定展示的字段
    inField = &quot;forum&quot;　　# 用于分组
    is_execute = True　　# 是否启用自定义插件，二级联动查询
    list_filter = [&quot;is_auth&quot;,&quot;is_recommend&quot;, &quot;is_essence&quot;,&quot;navi_f&quot;, &quot;navi_s&quot;, &quot;author&quot;, &quot;is_approval&quot;]　　# 过滤字段
    search_fields = [&quot;title&quot;]　　# 搜索字段
    list_editable = [&quot;is_approval&quot;]　　# 可编辑字段

    actions = [&quot;linkage_filter&quot;,]　　# 自定义插件</code></pre><h2 id="设置书签"><a href="#设置书签" class="headerlink" title="设置书签"></a>设置书签</h2><pre><code>list_bookmarks = [{
    &apos;title&apos;: &quot;京东数据&quot;,  # 书签的名称, 显示在书签菜单中
    &apos;query&apos;: {&apos;BA_name__contains&apos;: &apos;京东&apos;},  # 过滤参数, 是标准的 queryset 过滤
    &apos;order&apos;: (&quot;uid&quot;),  # 排序参数
    &apos;cols&apos;: (&quot;url&quot;,&apos;BA_id&apos;,&apos;BA_sex&apos;,&apos;BA_name&apos;,&apos;counts&apos;,&apos;change_time&apos;),  # 显示的列
}]</code></pre><h2 id="指定参数"><a href="#指定参数" class="headerlink" title="指定参数"></a>指定参数</h2><pre><code>list_display=[] #要显示的字段
search_fields=[] #搜索的字段
list_filter = [] #过滤器
date_hierarchy =[&apos;publication_date&apos;]  #添加过滤（这里是过滤日期）
ordering = [&apos;-publication_date&apos;,]   #排序（这里以日期排序，加‘-’表示降序）
filter_horizontal = (&apos;authors&apos;,) #filter_horizontal 从‘多选框’的形式改变为‘过滤器’的方式，水平排列过滤器，必须是一个 ManyToManyField类型，且不能用于 ForeignKey字段，默认地，管理工具使用`` 下拉框`` 来展现`` 外键`` 字段
filter_vertical = [&apos;authors&apos;,]#同上filter_horizontal，垂直排列过滤器
raw_id_fields = [&apos;publisher&apos;,] #将ForeignKey字段从‘下拉框’改变为‘文本框’显示
list_editable = [&apos;csdevice&apos;] #在列表页可直接编辑的字段
model_icon = &apos;fa fa-user-secret&apos;  #图标样式
style_fields = {&apos;csdevice&apos;: &apos;m2m_transfer&apos;,&apos;csservice&apos;: &apos;ueditor&apos;,} #字段显示样式
refresh_times = [10, 60] #自动刷新时间
show_detail_fields=[&apos;ttdsn&apos;] #在指定的字段后添加一个显示数据详情的一个按钮
relfield_style = &apos;fk-ajax&apos; #涉及到外键下拉的时候使用ajax搜索的方式而不是全部列出的方式，比如在分类下拉很多的情况下，这个功能就很好用
free_query_filter=[&apos;字段1&apos;,&apos;字段2&apos;,......]#默认为 True , 指定是否可以自由搜索. 如果开启自由搜索, 用户可以通过 url 参数来进行特定的搜索
exclude=[&apos;字段1&apos;,&apos;字段2&apos;,......]#隐藏字段
aggregate_fields = {&quot;expire&quot;: &quot;max&quot;}#  列聚合，在list表格下面会增加一行统计的数据，可用的值：&quot;count&quot;,&quot;min&quot;,&quot;max&quot;,&quot;avg&quot;,  &quot;sum&quot;
# 添加数据时候，一步一步提供数据，分块显示
wizard_form_list = [
        (&quot;基础信息&quot;, (&quot;name&quot;, &quot;contact&quot;, &quot;telphone&quot;, &quot;address&quot;)),
        (&quot;其它信息&quot;, (&quot;customer_id&quot;, &quot;expire&quot;, &quot;description&quot;)),
    ]
grid_layouts = (&quot;table&quot;, &quot;thumbnails&quot;) #列表的布局方式，是以表格一行一条的方式还是类似于缩略图的方式展示的
list_per_page = 50 # 每页显示数据的条数
list_max_show_all = 200 #每页最大显示数据的条数</code></pre><h1 id="错误处理"><a href="#错误处理" class="headerlink" title="错误处理"></a>错误处理</h1><p>如果出现错误：</p>
<pre><code>ModuleNotFoundError: No module named &apos;django.contrib.formtools&apos;</code></pre><p>依次执行命令：</p>
<pre><code>pip3 uninstall django-formtools
pip3 install django-formtools==2.1</code></pre><p>如果出现</p>
<pre><code>AttributeError: &apos;Settings&apos; object has no attribute &apos;MIDDLEWARE_CLASSES&apos;</code></pre><p>把</p>
<pre><code>if settings.LANGUAGES and ‘django.middleware.locale.LocaleMiddleware’ in settings.MIDDLEWARE_ClASSES:</code></pre><p>修改成</p>
<pre><code>if settings.LANGUAGES and &apos;django.middleware.locale.LocaleMiddleware&apos; in settings.MIDDLEWARE:</code></pre><p>如果出现</p>
<pre><code>ImportError: cannot import name &apos;QUERY_TERMS&apos;</code></pre><p>把</p>
<pre><code>from django.db.models.sql.query import LOOKUP_SEP, QUERY_TERMS</code></pre><p>修改成</p>
<pre><code>from django.db.models.sql.query import LOOKUP_SEP
from django.db.models.sql.constants import QUERY_TERMS</code></pre><p>如果出现</p>
<pre><code>forms.Field.__init__(self, required, widget, label, initial, help_text, *args, **kwargs)
TypeError: __init__() takes 1 positional argument but 6 were given</code></pre><p>把</p>
<pre><code>forms.Field.__init__(self, required, widget, label, initial, help_text, *args, **kwargs) </code></pre><p>修改成</p>
<pre><code>forms.Field.__init__(self)</code></pre><p>如果出现</p>
<pre><code>from django.core.urlresolvers import NoReverseMatch, reverse
ModuleNotFoundError: No module named &apos;django.core.urlresolvers&apos;</code></pre><p>需要修改源码</p>
<p>在</p>
<pre><code>lib\site-packages\xadmin-0.6.1-py3.6.egg\xadmin\models.py 文件

from django.core.urlresolvers import NoReverseMatch, reverse </code></pre><p>修改为</p>
<pre><code>from django.urls import NoReverseMatch, reverse</code></pre><p>如果出现</p>
<pre><code>TypeError: __init__() missing 1 required positional argument: &apos;on_delete&apos;</code></pre><p>把</p>
<pre><code>content_type = models.ForeignKey(ContentType)</code></pre><p>修改为</p>
<pre><code>content_type = models.ForeignKey(ContentType,on_delete=models.CASCADE)</code></pre><p><a href="https://blog.csdn.net/qq_34619992/article/details/79809432" target="_blank" rel="noopener">参考文献 1</a></p>
<p><a href="http://www.manongjc.com/article/18818.html" target="_blank" rel="noopener">参考文献 2</a></p>
<p><a href="https://www.jianshu.com/p/4ac3c8e096cb" target="_blank" rel="noopener">参考文献 3</a></p>
<p><a href="https://www.cnblogs.com/fiona-zhong/p/9431628.html" target="_blank" rel="noopener">参考文献 4</a></p>
<p><a href="https://wangbinbin0326.github.io/2018/10/27/xadmin-project-configure/" target="_blank" rel="noopener">参考文献 5</a></p>
</div><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">文章作者: </span><span class="post-copyright-info"><a href="mailto:undefined">Sxadmin</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">文章链接: </span><span class="post-copyright-info"><a href="https://sxadmin.github.io/2019/07/22/Django-Xadmin/">https://sxadmin.github.io/2019/07/22/Django-Xadmin/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="https://sxadmin.github.io" target="_blank">Sxadmin blog</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"></div><div class="post_share"><div class="social-share" data-image="/img/cover/cover104.png" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/social-share.js/dist/css/share.min.css"/><script src="https://cdn.jsdelivr.net/npm/social-share.js/dist/js/social-share.min.js"></script></div></div><div class="post-reward"><a class="reward-button button--primary button--animated"> <i class="fa fa-qrcode"></i> 打赏<div class="reward-main"><ul class="reward-all"><li class="reward-item"><img class="post-qr-code__img" src="/img/wechat.jpg" alt="微信"/><div class="post-qr-code__desc">微信</div></li><li class="reward-item"><img class="post-qr-code__img" src="/img/alipay.jpg" alt="支付寶"/><div class="post-qr-code__desc">支付寶</div></li></ul></div></a></div><nav class="pagination_post" id="pagination"><div class="prev-post pull_left"><a href="/2019/07/25/Django-%E4%BD%BF%E7%94%A8celery/"><img class="prev_cover" src="/img/cover/cover29.png" onerror="onerror=null;src='/img/404.jpg'"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">Django-使用celery</div></div></a></div><div class="next-post pull_right"><a href="/2019/07/19/Django-%E7%99%BB%E9%99%86%E9%AA%8C%E8%AF%81/"><img class="next_cover" src="/img/cover/cover101.png" onerror="onerror=null;src='/img/404.jpg'"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">Django-登陆验证</div></div></a></div></nav></article></main><footer id="footer" data-type="color"><div id="footer-wrap"><div class="copyright">&copy;2020 - 2021 By Sxadmin</div></div></footer></div><section class="rightside" id="rightside"><div id="rightside-config-hide"><i class="fa fa-book" id="readmode" title="阅读模式"></i><i class="fa fa-plus" id="font_plus" title="放大字体"></i><i class="fa fa-minus" id="font_minus" title="缩小字体"></i><a class="translate_chn_to_cht" id="translateLink" href="javascript:translatePage();" title="简繁转换" target="_self">繁</a><i class="darkmode fa fa-moon-o" id="darkmode" title="夜间模式"></i></div><div id="rightside-config-show"><div id="rightside_config" title="设置"><i class="fa fa-cog" aria-hidden="true"></i></div><i class="fa fa-list-ul close" id="mobile-toc-button" title="目录" aria-hidden="true"></i><i class="fa fa-arrow-up" id="go-up" title="回到顶部" aria-hidden="true"></i></div></section><script src="https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js"></script><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/tw_cn.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js"></script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script src="https://cdn.jsdelivr.net/npm/instant.page@3/instantpage.min.js" type="module"></script></body></html>